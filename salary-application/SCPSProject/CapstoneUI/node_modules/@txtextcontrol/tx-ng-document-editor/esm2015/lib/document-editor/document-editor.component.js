/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ElementRef, ViewChild } from '@angular/core';
import { TXSettings } from "./tx-settings";
import { TX_JS } from "./tx-min-js";
import { JQUERY_JS } from "./jquery-js";
import { JQUERY_UI_JS } from "./jquery-ui-js";
import { JQUERY_UI_TOUCH_PUNCH } from "./jquery-ui-touch-punch-js";
import { TX_CSS } from "./tx-css";
import { JQUERY_UI_CSS } from "./jquery-ui-css";
import { Color } from './color';
export class DocumentEditorComponent {
    /**
     * @param {?} hostElement
     */
    constructor(hostElement) {
        this.hostElement = hostElement;
        this.documentTargetMarkers = DocumentEditorComponent.DefaultSettings.DocumentTargetMarkers;
        this.backColor = DocumentEditorComponent.DefaultSettings.BackColor.toHexString();
        this.statusBarColor = DocumentEditorComponent.DefaultSettings.StatusBarColor.toHexString();
        this.editMode = 'Edit';
        this.contextMenusEnabled = DocumentEditorComponent.DefaultSettings.ContextMenusEnabled;
        this.saveDocumentQuestionDialogEnabled = DocumentEditorComponent.DefaultSettings.SaveDocumentQuestionDialogEnabled;
        this.tableGridLines = DocumentEditorComponent.DefaultSettings.TableGridLines;
        this.textFrameMarkerLines = DocumentEditorComponent.DefaultSettings.TextFrameMarkerLines;
        this.controlChars = DocumentEditorComponent.DefaultSettings.ControlChars;
        this.textFieldsEditable = DocumentEditorComponent.DefaultSettings.TextFieldsEditable;
        this.formattingPrinter = DocumentEditorComponent.DefaultSettings.FormattingPrinter;
        this.culture = DocumentEditorComponent.DefaultSettings.Culture;
        this.uiCulture = DocumentEditorComponent.DefaultSettings.UICulture;
        this.userNames = DocumentEditorComponent.DefaultSettings.UserNames;
        this.reconnectTimeout = DocumentEditorComponent.DefaultSettings.ReconnectTimeout;
        this.webSocketURL = DocumentEditorComponent.DefaultSettings.WebSocketURL;
        // Generate connection id
        this.connectionID = generateRandomID(21);
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // Dynamically add necessary scripts and stylesheets to dom
        // Dynamically add necessary scripts and stylesheets to dom
        // jQuery UI CSS
        /** @type {?} */
        let elemStyle = document.createElement('style');
        elemStyle.innerText = JQUERY_UI_CSS;
        this.containerDiv.nativeElement.appendChild(elemStyle);
        // TX CSS
        elemStyle = document.createElement('style');
        elemStyle.title = 'TX Text Control HTML5 Editor main Stylesheet';
        elemStyle.innerText = TX_CSS;
        this.containerDiv.nativeElement.appendChild(elemStyle);
        // TX settings
        /** @type {?} */
        let elemScript = document.createElement('script');
        elemScript.type = 'application/json';
        elemScript.id = '__txSettings';
        elemScript.innerText = JSON.stringify(this.settings);
        this.containerDiv.nativeElement.appendChild(elemScript);
        // jQuery
        elemScript = document.createElement('script');
        elemScript.innerText = JQUERY_JS;
        this.containerDiv.nativeElement.appendChild(elemScript);
        // jQuery UI
        elemScript = document.createElement('script');
        elemScript.innerText = JQUERY_UI_JS;
        this.containerDiv.nativeElement.appendChild(elemScript);
        // Touch enhancements for jQuery UI
        elemScript = document.createElement('script');
        elemScript.innerText = JQUERY_UI_TOUCH_PUNCH;
        this.containerDiv.nativeElement.appendChild(elemScript);
        // $.noConflict()
        elemScript = document.createElement('script');
        elemScript.innerText = DocumentEditorComponent.NO_CONFLICT_JS;
        this.containerDiv.nativeElement.appendChild(elemScript);
        // TX main script file
        elemScript = document.createElement('script');
        elemScript.innerText = TX_JS;
        this.containerDiv.nativeElement.appendChild(elemScript);
        // Set stuff on host element
        this.hostElement.nativeElement.style.display = 'inline-block';
        this.hostElement.nativeElement.style.width = this.width;
        this.hostElement.nativeElement.style.height = this.height;
    }
    /**
     * @return {?}
     */
    get settings() {
        /** @type {?} */
        let settings = new TXSettings(this.webSocketURL);
        settings.ConnectionID = this.connectionID;
        settings.DocumentTargetMarkers = this.documentTargetMarkers;
        settings.BackColor = Color.fromHexString(this.backColor);
        settings.StatusBarColor = Color.fromHexString(this.statusBarColor);
        settings.EditMode = TXSettings.editModeFromString(this.editMode);
        settings.ContextMenusEnabled = this.contextMenusEnabled;
        settings.SaveDocumentQuestionDialogEnabled = this.saveDocumentQuestionDialogEnabled;
        settings.TableGridLines = this.tableGridLines;
        settings.TextFrameMarkerLines = this.textFrameMarkerLines;
        settings.ControlChars = this.controlChars;
        settings.TextFieldsEditable = this.textFieldsEditable;
        settings.FormattingPrinter = this.formattingPrinter;
        settings.Culture = this.culture;
        settings.UICulture = this.uiCulture;
        settings.UserNames = this.userNames;
        settings.ReconnectTimeout = this.reconnectTimeout;
        settings.WebSocketURL = this.webSocketURL;
        return settings;
    }
}
DocumentEditorComponent.DefaultSettings = new TXSettings();
DocumentEditorComponent.NO_CONFLICT_JS = 'var j$1_10_2 = $.noConflict(true);';
DocumentEditorComponent.decorators = [
    { type: Component, args: [{
                selector: 'tx-document-editor',
                template: "<div #txTemplateDesignerContainer id=\"txTemplateDesignerContainer\" [style.position]=\"'relative'\">\r\n   <img id=\"txLoaderGif\" style=\"display: none\"\r\n      src=\"data:image/gif;base64,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\" />\r\n   <div id=\"ribbonbar\" class=\"unselectable\">\r\n      <div id=\"txRibbonCover\"></div>\r\n      <div class=\"txRibbonScrollArrow\" id=\"txRibbonScrollButtonRight\" style=\"opacity: 0\">\r\n         <div class=\"txTriangle\" id=\"txBlackTriangleR\"></div>\r\n      </div>\r\n      <div class=\"txRibbonScrollArrow\" id=\"txRibbonScrollButtonLeft\" style=\"opacity: 0\">\r\n         <div class=\"txTriangle\" id=\"txBlackTriangleL\"></div>\r\n      </div>\r\n      <div id=\"txBtnRibbonHide\">\r\n         <img id=\"txArrowRibbonHideWrapper\"\r\n            src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=\" />\r\n      </div>\r\n      <ul class=\"tabs\" style=\"display: none\">\r\n      </ul>\r\n      <div id=\"txRibbonContentArea\">\r\n         <div id=\"txRibbonTabContentContainer\">\r\n         </div>\r\n      </div>\r\n   </div>\r\n   <div id=\"trackChangesSidebar\" class=\"sidebar\" style=\"overflow: hidden;\">\r\n      <img\r\n         src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=\"\r\n         class=\"closebtn button\" style=\"width: 16px; height: 16px\" />\r\n      <img\r\n         src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=\"\r\n         class=\"refreshbtn button\" style=\"width: 16px; height: 16px\" />\r\n      <div class=\"sidebarHeader unselectable\">\r\n         <span class=\"sidebarHeaderTitle unselectable\"></span>\r\n         <br />\r\n         <span class=\"sidebarHeaderSubTitle unselectable\"></span>\r\n      </div>\r\n      <div class=\"sidebarContentContainer unselectable\">\r\n         <canvas id=\"trackChangesCanvas\" class=\"trackChangesContent\"></canvas>\r\n         <div id=\"txTrackChangesScrollbar\" class=\"txScrollbar txScrollbar-vertical\">\r\n            <div class=\"scroll-button scroll-button-vert scroll-button-up unselectable\">\r\n               <div class=\"scroll-button-arrow-wrapper\"></div>\r\n            </div>\r\n            <div class=\"scrollbar-wrapper unselectable\">\r\n               <div class=\"txslider\"></div>\r\n            </div>\r\n            <div class=\"scroll-button scroll-button-vert scroll-button-down unselectable\"\r\n               style=\"vertical-align: bottom;\">\r\n               <div class=\"scroll-button-arrow-wrapper\"></div>\r\n            </div>\r\n         </div>\r\n         <div id=\"txTrackChangesHorScrollbar\" class=\"txScrollbar txScrollbar-horizontal\">\r\n            <div class=\"scroll-button scroll-button-hor scroll-button-left unselectable\">\r\n               <div class=\"scroll-button-arrow-wrapper\"></div>\r\n            </div>\r\n            <div class=\"scrollbar-wrapper unselectable\">\r\n               <div class=\"txslider\"></div>\r\n            </div>\r\n            <div class=\"scroll-button scroll-button-hor scroll-button-right unselectable\">\r\n               <div class=\"scroll-button-arrow-wrapper\"></div>\r\n            </div>\r\n         </div>\r\n      </div>\r\n   </div>\r\n   <canvas id=\"mainCanvas\" style=\"opacity: 0\"></canvas>\r\n   <canvas id=\"horRulerCanvas\" style=\"opacity: 0\"></canvas>\r\n   <canvas id=\"vertRulerCanvas\" style=\"opacity: 0\"></canvas>\r\n   <div class=\"txScrollbarContainer\" style=\"opacity: 0\">\r\n      <div id=\"scroll-button-left\" class=\"scroll-button scroll-button-hor unselectable\">\r\n         <div class=\"scroll-button-arrow-wrapper\"></div>\r\n      </div>\r\n      <div id=\"horizontal-scrollbar-wrapper\" class=\"scrollbar-wrapper unselectable\">\r\n         <div id=\"slider-horizontal\"></div>\r\n      </div>\r\n      <div id=\"scroll-button-right\" class=\"scroll-button scroll-button-hor unselectable\">\r\n         <div class=\"scroll-button-arrow-wrapper\"></div>\r\n      </div>\r\n   </div>\r\n   <div class=\"txScrollbarContainer\" style=\"opacity: 0\">\r\n      <div id=\"scroll-button-up\" class=\"scroll-button scroll-button-vert unselectable\">\r\n         <div class=\"scroll-button-arrow-wrapper\"></div>\r\n      </div>\r\n      <div id=\"vertical-scrollbar-wrapper\" class=\"scrollbar-wrapper unselectable\">\r\n         <div id=\"slider-vertical\"></div>\r\n      </div>\r\n      <div id=\"scroll-button-down\" class=\"scroll-button scroll-button-vert unselectable\">\r\n         <div class=\"scroll-button-arrow-wrapper\"></div>\r\n      </div>\r\n   </div>\r\n   <canvas id=\"statusBarCanvas\" style=\"opacity: 0\"></canvas>\r\n   <ul id=\"txContextMenu\" class=\"dropDownMenu contextMenu\">\r\n   </ul>\r\n   <form id=\"txNovalidateForm\" novalidate=\"novalidate\" spellcheck=\"false\" autocomplete=\"off\"></form>\r\n</div>",
                styles: [""]
            }] }
];
/** @nocollapse */
DocumentEditorComponent.ctorParameters = () => [
    { type: ElementRef }
];
DocumentEditorComponent.propDecorators = {
    containerDiv: [{ type: ViewChild, args: ['txTemplateDesignerContainer', { static: true },] }],
    width: [{ type: Input }],
    height: [{ type: Input }],
    documentTargetMarkers: [{ type: Input }],
    backColor: [{ type: Input }],
    statusBarColor: [{ type: Input }],
    editMode: [{ type: Input }],
    contextMenusEnabled: [{ type: Input }],
    saveDocumentQuestionDialogEnabled: [{ type: Input }],
    tableGridLines: [{ type: Input }],
    textFrameMarkerLines: [{ type: Input }],
    controlChars: [{ type: Input }],
    textFieldsEditable: [{ type: Input }],
    formattingPrinter: [{ type: Input }],
    culture: [{ type: Input }],
    uiCulture: [{ type: Input }],
    userNames: [{ type: Input }],
    reconnectTimeout: [{ type: Input }],
    webSocketURL: [{ type: Input }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    DocumentEditorComponent.DefaultSettings;
    /**
     * @type {?}
     * @private
     */
    DocumentEditorComponent.NO_CONFLICT_JS;
    /** @type {?} */
    DocumentEditorComponent.prototype.containerDiv;
    /**
     * @type {?}
     * @private
     */
    DocumentEditorComponent.prototype.connectionID;
    /** @type {?} */
    DocumentEditorComponent.prototype.width;
    /** @type {?} */
    DocumentEditorComponent.prototype.height;
    /** @type {?} */
    DocumentEditorComponent.prototype.documentTargetMarkers;
    /** @type {?} */
    DocumentEditorComponent.prototype.backColor;
    /** @type {?} */
    DocumentEditorComponent.prototype.statusBarColor;
    /** @type {?} */
    DocumentEditorComponent.prototype.editMode;
    /** @type {?} */
    DocumentEditorComponent.prototype.contextMenusEnabled;
    /** @type {?} */
    DocumentEditorComponent.prototype.saveDocumentQuestionDialogEnabled;
    /** @type {?} */
    DocumentEditorComponent.prototype.tableGridLines;
    /** @type {?} */
    DocumentEditorComponent.prototype.textFrameMarkerLines;
    /** @type {?} */
    DocumentEditorComponent.prototype.controlChars;
    /** @type {?} */
    DocumentEditorComponent.prototype.textFieldsEditable;
    /** @type {?} */
    DocumentEditorComponent.prototype.formattingPrinter;
    /** @type {?} */
    DocumentEditorComponent.prototype.culture;
    /** @type {?} */
    DocumentEditorComponent.prototype.uiCulture;
    /** @type {?} */
    DocumentEditorComponent.prototype.userNames;
    /** @type {?} */
    DocumentEditorComponent.prototype.reconnectTimeout;
    /** @type {?} */
    DocumentEditorComponent.prototype.webSocketURL;
    /**
     * @type {?}
     * @private
     */
    DocumentEditorComponent.prototype.hostElement;
}
/** @type {?} */
const ConIDCharset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_';
/**
 * Generates a random string with a given length.
 * @param {?} length Length of the generated ID in characters.
 * @return {?}
 */
function generateRandomID(length) {
    if (length < 1)
        throw new Error('ID must be at least one character long.');
    /** @type {?} */
    let result = '';
    for (var i = 0; i < length; ++i) {
        result += ConIDCharset.charAt(Math.floor(Math.random() * ConIDCharset.length));
    }
    return result;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG9jdW1lbnQtZWRpdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0eHRleHRjb250cm9sL3R4LW5nLWRvY3VtZW50LWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi9kb2N1bWVudC1lZGl0b3IvZG9jdW1lbnQtZWRpdG9yLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNoRixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDcEMsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUN4QyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDOUMsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDbkUsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUNsQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDaEQsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFNBQVMsQ0FBQztBQU9oQyxNQUFNLE9BQU8sdUJBQXVCOzs7O0lBS2pDLFlBQW9CLFdBQXVCO1FBQXZCLGdCQUFXLEdBQVgsV0FBVyxDQUFZO1FBU2xDLDBCQUFxQixHQUFZLHVCQUF1QixDQUFDLGVBQWUsQ0FBQyxxQkFBcUIsQ0FBQztRQUMvRixjQUFTLEdBQVcsdUJBQXVCLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNwRixtQkFBYyxHQUFXLHVCQUF1QixDQUFDLGVBQWUsQ0FBQyxjQUFjLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDOUYsYUFBUSxHQUFXLE1BQU0sQ0FBQztRQUMxQix3QkFBbUIsR0FBWSx1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ZiwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFRYU2V0dGluZ3MgfSBmcm9tIFwiLi90eC1zZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBUWF9KUyB9IGZyb20gXCIuL3R4LW1pbi1qc1wiO1xyXG5pbXBvcnQgeyBKUVVFUllfSlMgfSBmcm9tIFwiLi9qcXVlcnktanNcIjtcclxuaW1wb3J0IHsgSlFVRVJZX1VJX0pTIH0gZnJvbSBcIi4vanF1ZXJ5LXVpLWpzXCI7XHJcbmltcG9ydCB7IEpRVUVSWV9VSV9UT1VDSF9QVU5DSCB9IGZyb20gXCIuL2pxdWVyeS11aS10b3VjaC1wdW5jaC1qc1wiO1xyXG5pbXBvcnQgeyBUWF9DU1MgfSBmcm9tIFwiLi90eC1jc3NcIjtcclxuaW1wb3J0IHsgSlFVRVJZX1VJX0NTUyB9IGZyb20gXCIuL2pxdWVyeS11aS1jc3NcIjtcclxuaW1wb3J0IHsgQ29sb3IgfSBmcm9tICcuL2NvbG9yJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICBzZWxlY3RvcjogJ3R4LWRvY3VtZW50LWVkaXRvcicsXHJcbiAgIHRlbXBsYXRlVXJsOiAnLi9kb2N1bWVudC1lZGl0b3IuY29tcG9uZW50Lmh0bWwnLFxyXG4gICBzdHlsZVVybHM6IFsnLi9kb2N1bWVudC1lZGl0b3IuY29tcG9uZW50LmNzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEb2N1bWVudEVkaXRvckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgIEBWaWV3Q2hpbGQoJ3R4VGVtcGxhdGVEZXNpZ25lckNvbnRhaW5lcicsIHsgc3RhdGljOiB0cnVlIH0pIGNvbnRhaW5lckRpdjogRWxlbWVudFJlZjtcclxuXHJcbiAgIHByaXZhdGUgY29ubmVjdGlvbklEOiBzdHJpbmc7XHJcblxyXG4gICBjb25zdHJ1Y3Rvcihwcml2YXRlIGhvc3RFbGVtZW50OiBFbGVtZW50UmVmKSB7XHJcbiAgICAgIC8vIEdlbmVyYXRlIGNvbm5lY3Rpb24gaWRcclxuICAgICAgdGhpcy5jb25uZWN0aW9uSUQgPSBnZW5lcmF0ZVJhbmRvbUlEKDIxKTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgRGVmYXVsdFNldHRpbmdzOiBUWFNldHRpbmdzID0gbmV3IFRYU2V0dGluZ3MoKTtcclxuXHJcbiAgIEBJbnB1dCgpIHdpZHRoOiBzdHJpbmc7XHJcbiAgIEBJbnB1dCgpIGhlaWdodDogc3RyaW5nO1xyXG4gICBASW5wdXQoKSBkb2N1bWVudFRhcmdldE1hcmtlcnM6IGJvb2xlYW4gPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5EZWZhdWx0U2V0dGluZ3MuRG9jdW1lbnRUYXJnZXRNYXJrZXJzO1xyXG4gICBASW5wdXQoKSBiYWNrQ29sb3I6IHN0cmluZyA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50LkRlZmF1bHRTZXR0aW5ncy5CYWNrQ29sb3IudG9IZXhTdHJpbmcoKTtcclxuICAgQElucHV0KCkgc3RhdHVzQmFyQ29sb3I6IHN0cmluZyA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50LkRlZmF1bHRTZXR0aW5ncy5TdGF0dXNCYXJDb2xvci50b0hleFN0cmluZygpO1xyXG4gICBASW5wdXQoKSBlZGl0TW9kZTogc3RyaW5nID0gJ0VkaXQnO1xyXG4gICBASW5wdXQoKSBjb250ZXh0TWVudXNFbmFibGVkOiBib29sZWFuID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuRGVmYXVsdFNldHRpbmdzLkNvbnRleHRNZW51c0VuYWJsZWQ7XHJcbiAgIEBJbnB1dCgpIHNhdmVEb2N1bWVudFF1ZXN0aW9uRGlhbG9nRW5hYmxlZDogYm9vbGVhbiA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50LkRlZmF1bHRTZXR0aW5ncy5TYXZlRG9jdW1lbnRRdWVzdGlvbkRpYWxvZ0VuYWJsZWQ7XHJcbiAgIEBJbnB1dCgpIHRhYmxlR3JpZExpbmVzOiBib29sZWFuID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuRGVmYXVsdFNldHRpbmdzLlRhYmxlR3JpZExpbmVzO1xyXG4gICBASW5wdXQoKSB0ZXh0RnJhbWVNYXJrZXJMaW5lczogYm9vbGVhbiA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50LkRlZmF1bHRTZXR0aW5ncy5UZXh0RnJhbWVNYXJrZXJMaW5lcztcclxuICAgQElucHV0KCkgY29udHJvbENoYXJzOiBib29sZWFuID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuRGVmYXVsdFNldHRpbmdzLkNvbnRyb2xDaGFycztcclxuICAgQElucHV0KCkgdGV4dEZpZWxkc0VkaXRhYmxlOiBib29sZWFuID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuRGVmYXVsdFNldHRpbmdzLlRleHRGaWVsZHNFZGl0YWJsZTtcclxuICAgQElucHV0KCkgZm9ybWF0dGluZ1ByaW50ZXI6IHN0cmluZyA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50LkRlZmF1bHRTZXR0aW5ncy5Gb3JtYXR0aW5nUHJpbnRlcjtcclxuICAgQElucHV0KCkgY3VsdHVyZTogc3RyaW5nID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuRGVmYXVsdFNldHRpbmdzLkN1bHR1cmU7XHJcbiAgIEBJbnB1dCgpIHVpQ3VsdHVyZTogc3RyaW5nID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuRGVmYXVsdFNldHRpbmdzLlVJQ3VsdHVyZTtcclxuICAgQElucHV0KCkgdXNlck5hbWVzOiBzdHJpbmdbXSA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50LkRlZmF1bHRTZXR0aW5ncy5Vc2VyTmFtZXM7XHJcbiAgIEBJbnB1dCgpIHJlY29ubmVjdFRpbWVvdXQ6IG51bWJlciA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50LkRlZmF1bHRTZXR0aW5ncy5SZWNvbm5lY3RUaW1lb3V0O1xyXG4gICBASW5wdXQoKSB3ZWJTb2NrZXRVUkw6IHN0cmluZyA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50LkRlZmF1bHRTZXR0aW5ncy5XZWJTb2NrZXRVUkw7XHJcblxyXG4gICBuZ09uSW5pdCgpIHtcclxuICAgICAgLy8gRHluYW1pY2FsbHkgYWRkIG5lY2Vzc2FyeSBzY3JpcHRzIGFuZCBzdHlsZXNoZWV0cyB0byBkb21cclxuXHJcbiAgICAgIC8vIGpRdWVyeSBVSSBDU1NcclxuICAgICAgbGV0IGVsZW1TdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcbiAgICAgIGVsZW1TdHlsZS5pbm5lclRleHQgPSBKUVVFUllfVUlfQ1NTO1xyXG4gICAgICB0aGlzLmNvbnRhaW5lckRpdi5uYXRpdmVFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1TdHlsZSk7XHJcblxyXG4gICAgICAvLyBUWCBDU1NcclxuICAgICAgZWxlbVN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcclxuICAgICAgZWxlbVN0eWxlLnRpdGxlID0gJ1RYIFRleHQgQ29udHJvbCBIVE1MNSBFZGl0b3IgbWFpbiBTdHlsZXNoZWV0JztcclxuICAgICAgZWxlbVN0eWxlLmlubmVyVGV4dCA9IFRYX0NTUztcclxuICAgICAgdGhpcy5jb250YWluZXJEaXYubmF0aXZlRWxlbWVudC5hcHBlbmRDaGlsZChlbGVtU3R5bGUpO1xyXG5cclxuICAgICAgLy8gVFggc2V0dGluZ3NcclxuICAgICAgbGV0IGVsZW1TY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgZWxlbVNjcmlwdC50eXBlID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xyXG4gICAgICBlbGVtU2NyaXB0LmlkID0gJ19fdHhTZXR0aW5ncyc7XHJcbiAgICAgIGVsZW1TY3JpcHQuaW5uZXJUZXh0ID0gSlNPTi5zdHJpbmdpZnkodGhpcy5zZXR0aW5ncyk7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyRGl2Lm5hdGl2ZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlbVNjcmlwdCk7XHJcblxyXG4gICAgICAvLyBqUXVlcnlcclxuICAgICAgZWxlbVNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICBlbGVtU2NyaXB0LmlubmVyVGV4dCA9IEpRVUVSWV9KUztcclxuICAgICAgdGhpcy5jb250YWluZXJEaXYubmF0aXZlRWxlbWVudC5hcHBlbmRDaGlsZChlbGVtU2NyaXB0KTtcclxuXHJcbiAgICAgIC8vIGpRdWVyeSBVSVxyXG4gICAgICBlbGVtU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgIGVsZW1TY3JpcHQuaW5uZXJUZXh0ID0gSlFVRVJZX1VJX0pTO1xyXG4gICAgICB0aGlzLmNvbnRhaW5lckRpdi5uYXRpdmVFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1TY3JpcHQpO1xyXG5cclxuICAgICAgLy8gVG91Y2ggZW5oYW5jZW1lbnRzIGZvciBqUXVlcnkgVUlcclxuICAgICAgZWxlbVNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICBlbGVtU2NyaXB0LmlubmVyVGV4dCA9IEpRVUVSWV9VSV9UT1VDSF9QVU5DSDtcclxuICAgICAgdGhpcy5jb250YWluZXJEaXYubmF0aXZlRWxlbWVudC5hcHBlbmRDaGlsZChlbGVtU2NyaXB0KTtcclxuXHJcbiAgICAgIC8vICQubm9Db25mbGljdCgpXHJcbiAgICAgIGVsZW1TY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgZWxlbVNjcmlwdC5pbm5lclRleHQgPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5OT19DT05GTElDVF9KUztcclxuICAgICAgdGhpcy5jb250YWluZXJEaXYubmF0aXZlRWxlbWVudC5hcHBlbmRDaGlsZChlbGVtU2NyaXB0KTtcclxuXHJcbiAgICAgIC8vIFRYIG1haW4gc2NyaXB0IGZpbGVcclxuICAgICAgZWxlbVNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICBlbGVtU2NyaXB0LmlubmVyVGV4dCA9IFRYX0pTO1xyXG4gICAgICB0aGlzLmNvbnRhaW5lckRpdi5uYXRpdmVFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1TY3JpcHQpO1xyXG5cclxuICAgICAgLy8gU2V0IHN0dWZmIG9uIGhvc3QgZWxlbWVudFxyXG4gICAgICB0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xyXG4gICAgICB0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuc3R5bGUud2lkdGggPSB0aGlzLndpZHRoO1xyXG4gICAgICB0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XHJcbiAgIH1cclxuXHJcbiAgIGdldCBzZXR0aW5ncygpOiBUWFNldHRpbmdzIHtcclxuICAgICAgbGV0IHNldHRpbmdzID0gbmV3IFRYU2V0dGluZ3ModGhpcy53ZWJTb2NrZXRVUkwpO1xyXG5cclxuICAgICAgc2V0dGluZ3MuQ29ubmVjdGlvbklEID0gdGhpcy5jb25uZWN0aW9uSURcclxuICAgICAgc2V0dGluZ3MuRG9jdW1lbnRUYXJnZXRNYXJrZXJzID0gdGhpcy5kb2N1bWVudFRhcmdldE1hcmtlcnM7XHJcbiAgICAgIHNldHRpbmdzLkJhY2tDb2xvciA9IENvbG9yLmZyb21IZXhTdHJpbmcodGhpcy5iYWNrQ29sb3IpO1xyXG4gICAgICBzZXR0aW5ncy5TdGF0dXNCYXJDb2xvciA9IENvbG9yLmZyb21IZXhTdHJpbmcodGhpcy5zdGF0dXNCYXJDb2xvcik7XHJcbiAgICAgIHNldHRpbmdzLkVkaXRNb2RlID0gVFhTZXR0aW5ncy5lZGl0TW9kZUZyb21TdHJpbmcodGhpcy5lZGl0TW9kZSk7XHJcbiAgICAgIHNldHRpbmdzLkNvbnRleHRNZW51c0VuYWJsZWQgPSB0aGlzLmNvbnRleHRNZW51c0VuYWJsZWQ7XHJcbiAgICAgIHNldHRpbmdzLlNhdmVEb2N1bWVudFF1ZXN0aW9uRGlhbG9nRW5hYmxlZCA9IHRoaXMuc2F2ZURvY3VtZW50UXVlc3Rpb25EaWFsb2dFbmFibGVkO1xyXG4gICAgICBzZXR0aW5ncy5UYWJsZUdyaWRMaW5lcyA9IHRoaXMudGFibGVHcmlkTGluZXM7XHJcbiAgICAgIHNldHRpbmdzLlRleHRGcmFtZU1hcmtlckxpbmVzID0gdGhpcy50ZXh0RnJhbWVNYXJrZXJMaW5lcztcclxuICAgICAgc2V0dGluZ3MuQ29udHJvbENoYXJzID0gdGhpcy5jb250cm9sQ2hhcnM7XHJcbiAgICAgIHNldHRpbmdzLlRleHRGaWVsZHNFZGl0YWJsZSA9IHRoaXMudGV4dEZpZWxkc0VkaXRhYmxlO1xyXG4gICAgICBzZXR0aW5ncy5Gb3JtYXR0aW5nUHJpbnRlciA9IHRoaXMuZm9ybWF0dGluZ1ByaW50ZXI7XHJcbiAgICAgIHNldHRpbmdzLkN1bHR1cmUgPSB0aGlzLmN1bHR1cmU7XHJcbiAgICAgIHNldHRpbmdzLlVJQ3VsdHVyZSA9IHRoaXMudWlDdWx0dXJlO1xyXG4gICAgICBzZXR0aW5ncy5Vc2VyTmFtZXMgPSB0aGlzLnVzZXJOYW1lcztcclxuICAgICAgc2V0dGluZ3MuUmVjb25uZWN0VGltZW91dCA9IHRoaXMucmVjb25uZWN0VGltZW91dDtcclxuICAgICAgc2V0dGluZ3MuV2ViU29ja2V0VVJMID0gdGhpcy53ZWJTb2NrZXRVUkw7XHJcblxyXG4gICAgICByZXR1cm4gc2V0dGluZ3M7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IE5PX0NPTkZMSUNUX0pTOiBzdHJpbmcgPSAndmFyIGokMV8xMF8yID0gJC5ub0NvbmZsaWN0KHRydWUpOyc7XHJcbn1cclxuXHJcbmNvbnN0IENvbklEQ2hhcnNldDogc3RyaW5nID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVoxMjM0NTY3ODkwXyc7XHJcblxyXG4vKipcclxuICogR2VuZXJhdGVzIGEgcmFuZG9tIHN0cmluZyB3aXRoIGEgZ2l2ZW4gbGVuZ3RoLlxyXG4gKiBAcGFyYW0gbGVuZ3RoIExlbmd0aCBvZiB0aGUgZ2VuZXJhdGVkIElEIGluIGNoYXJhY3RlcnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbUlEKGxlbmd0aDogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgaWYgKGxlbmd0aCA8IDEpIHRocm93IG5ldyBFcnJvcignSUQgbXVzdCBiZSBhdCBsZWFzdCBvbmUgY2hhcmFjdGVyIGxvbmcuJyk7XHJcblxyXG4gICBsZXQgcmVzdWx0OiBzdHJpbmcgPSAnJztcclxuXHJcbiAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcclxuICAgICAgcmVzdWx0ICs9IENvbklEQ2hhcnNldC5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogQ29uSURDaGFyc2V0Lmxlbmd0aCkpO1xyXG4gICB9XHJcblxyXG4gICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbiJdfQ==