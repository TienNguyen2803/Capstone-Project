/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ElementRef, ViewChild } from '@angular/core';
import { TXSettings } from "./tx-settings";
import { TX_JS } from "./tx-min-js";
import { JQUERY_JS } from "./jquery-js";
import { JQUERY_UI_JS } from "./jquery-ui-js";
import { JQUERY_UI_TOUCH_PUNCH } from "./jquery-ui-touch-punch-js";
import { TX_CSS } from "./tx-css";
import { JQUERY_UI_CSS } from "./jquery-ui-css";
import { Color } from './color';
var DocumentEditorComponent = /** @class */ (function () {
    function DocumentEditorComponent(hostElement) {
        this.hostElement = hostElement;
        this.documentTargetMarkers = DocumentEditorComponent.DefaultSettings.DocumentTargetMarkers;
        this.backColor = DocumentEditorComponent.DefaultSettings.BackColor.toHexString();
        this.statusBarColor = DocumentEditorComponent.DefaultSettings.StatusBarColor.toHexString();
        this.editMode = 'Edit';
        this.contextMenusEnabled = DocumentEditorComponent.DefaultSettings.ContextMenusEnabled;
        this.saveDocumentQuestionDialogEnabled = DocumentEditorComponent.DefaultSettings.SaveDocumentQuestionDialogEnabled;
        this.tableGridLines = DocumentEditorComponent.DefaultSettings.TableGridLines;
        this.textFrameMarkerLines = DocumentEditorComponent.DefaultSettings.TextFrameMarkerLines;
        this.controlChars = DocumentEditorComponent.DefaultSettings.ControlChars;
        this.textFieldsEditable = DocumentEditorComponent.DefaultSettings.TextFieldsEditable;
        this.formattingPrinter = DocumentEditorComponent.DefaultSettings.FormattingPrinter;
        this.culture = DocumentEditorComponent.DefaultSettings.Culture;
        this.uiCulture = DocumentEditorComponent.DefaultSettings.UICulture;
        this.userNames = DocumentEditorComponent.DefaultSettings.UserNames;
        this.reconnectTimeout = DocumentEditorComponent.DefaultSettings.ReconnectTimeout;
        this.webSocketURL = DocumentEditorComponent.DefaultSettings.WebSocketURL;
        // Generate connection id
        this.connectionID = generateRandomID(21);
    }
    /**
     * @return {?}
     */
    DocumentEditorComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // Dynamically add necessary scripts and stylesheets to dom
        // Dynamically add necessary scripts and stylesheets to dom
        // jQuery UI CSS
        /** @type {?} */
        var elemStyle = document.createElement('style');
        elemStyle.innerText = JQUERY_UI_CSS;
        this.containerDiv.nativeElement.appendChild(elemStyle);
        // TX CSS
        elemStyle = document.createElement('style');
        elemStyle.title = 'TX Text Control HTML5 Editor main Stylesheet';
        elemStyle.innerText = TX_CSS;
        this.containerDiv.nativeElement.appendChild(elemStyle);
        // TX settings
        /** @type {?} */
        var elemScript = document.createElement('script');
        elemScript.type = 'application/json';
        elemScript.id = '__txSettings';
        elemScript.innerText = JSON.stringify(this.settings);
        this.containerDiv.nativeElement.appendChild(elemScript);
        // jQuery
        elemScript = document.createElement('script');
        elemScript.innerText = JQUERY_JS;
        this.containerDiv.nativeElement.appendChild(elemScript);
        // jQuery UI
        elemScript = document.createElement('script');
        elemScript.innerText = JQUERY_UI_JS;
        this.containerDiv.nativeElement.appendChild(elemScript);
        // Touch enhancements for jQuery UI
        elemScript = document.createElement('script');
        elemScript.innerText = JQUERY_UI_TOUCH_PUNCH;
        this.containerDiv.nativeElement.appendChild(elemScript);
        // $.noConflict()
        elemScript = document.createElement('script');
        elemScript.innerText = DocumentEditorComponent.NO_CONFLICT_JS;
        this.containerDiv.nativeElement.appendChild(elemScript);
        // TX main script file
        elemScript = document.createElement('script');
        elemScript.innerText = TX_JS;
        this.containerDiv.nativeElement.appendChild(elemScript);
        // Set stuff on host element
        this.hostElement.nativeElement.style.display = 'inline-block';
        this.hostElement.nativeElement.style.width = this.width;
        this.hostElement.nativeElement.style.height = this.height;
    };
    Object.defineProperty(DocumentEditorComponent.prototype, "settings", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var settings = new TXSettings(this.webSocketURL);
            settings.ConnectionID = this.connectionID;
            settings.DocumentTargetMarkers = this.documentTargetMarkers;
            settings.BackColor = Color.fromHexString(this.backColor);
            settings.StatusBarColor = Color.fromHexString(this.statusBarColor);
            settings.EditMode = TXSettings.editModeFromString(this.editMode);
            settings.ContextMenusEnabled = this.contextMenusEnabled;
            settings.SaveDocumentQuestionDialogEnabled = this.saveDocumentQuestionDialogEnabled;
            settings.TableGridLines = this.tableGridLines;
            settings.TextFrameMarkerLines = this.textFrameMarkerLines;
            settings.ControlChars = this.controlChars;
            settings.TextFieldsEditable = this.textFieldsEditable;
            settings.FormattingPrinter = this.formattingPrinter;
            settings.Culture = this.culture;
            settings.UICulture = this.uiCulture;
            settings.UserNames = this.userNames;
            settings.ReconnectTimeout = this.reconnectTimeout;
            settings.WebSocketURL = this.webSocketURL;
            return settings;
        },
        enumerable: true,
        configurable: true
    });
    DocumentEditorComponent.DefaultSettings = new TXSettings();
    DocumentEditorComponent.NO_CONFLICT_JS = 'var j$1_10_2 = $.noConflict(true);';
    DocumentEditorComponent.decorators = [
        { type: Component, args: [{
                    selector: 'tx-document-editor',
                    template: "<div #txTemplateDesignerContainer id=\"txTemplateDesignerContainer\" [style.position]=\"'relative'\">\r\n   <img id=\"txLoaderGif\" style=\"display: none\"\r\n      src=\"data:image/gif;base64,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\" />\r\n   <div id=\"ribbonbar\" class=\"unselectable\">\r\n      <div id=\"txRibbonCover\"></div>\r\n      <div class=\"txRibbonScrollArrow\" id=\"txRibbonScrollButtonRight\" style=\"opacity: 0\">\r\n         <div class=\"txTriangle\" id=\"txBlackTriangleR\"></div>\r\n      </div>\r\n      <div class=\"txRibbonScrollArrow\" id=\"txRibbonScrollButtonLeft\" style=\"opacity: 0\">\r\n         <div class=\"txTriangle\" id=\"txBlackTriangleL\"></div>\r\n      </div>\r\n      <div id=\"txBtnRibbonHide\">\r\n         <img id=\"txArrowRibbonHideWrapper\"\r\n            src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=\" />\r\n      </div>\r\n      <ul class=\"tabs\" style=\"display: none\">\r\n      </ul>\r\n      <div id=\"txRibbonContentArea\">\r\n         <div id=\"txRibbonTabContentContainer\">\r\n         </div>\r\n      </div>\r\n   </div>\r\n   <div id=\"trackChangesSidebar\" class=\"sidebar\" style=\"overflow: hidden;\">\r\n      <img\r\n         src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=\"\r\n         class=\"closebtn button\" style=\"width: 16px; height: 16px\" />\r\n      <img\r\n         src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=\"\r\n         class=\"refreshbtn button\" style=\"width: 16px; height: 16px\" />\r\n      <div class=\"sidebarHeader unselectable\">\r\n         <span class=\"sidebarHeaderTitle unselectable\"></span>\r\n         <br />\r\n         <span class=\"sidebarHeaderSubTitle unselectable\"></span>\r\n      </div>\r\n      <div class=\"sidebarContentContainer unselectable\">\r\n         <canvas id=\"trackChangesCanvas\" class=\"trackChangesContent\"></canvas>\r\n         <div id=\"txTrackChangesScrollbar\" class=\"txScrollbar txScrollbar-vertical\">\r\n            <div class=\"scroll-button scroll-button-vert scroll-button-up unselectable\">\r\n               <div class=\"scroll-button-arrow-wrapper\"></div>\r\n            </div>\r\n            <div class=\"scrollbar-wrapper unselectable\">\r\n               <div class=\"txslider\"></div>\r\n            </div>\r\n            <div class=\"scroll-button scroll-button-vert scroll-button-down unselectable\"\r\n               style=\"vertical-align: bottom;\">\r\n               <div class=\"scroll-button-arrow-wrapper\"></div>\r\n            </div>\r\n         </div>\r\n         <div id=\"txTrackChangesHorScrollbar\" class=\"txScrollbar txScrollbar-horizontal\">\r\n            <div class=\"scroll-button scroll-button-hor scroll-button-left unselectable\">\r\n               <div class=\"scroll-button-arrow-wrapper\"></div>\r\n            </div>\r\n            <div class=\"scrollbar-wrapper unselectable\">\r\n               <div class=\"txslider\"></div>\r\n            </div>\r\n            <div class=\"scroll-button scroll-button-hor scroll-button-right unselectable\">\r\n               <div class=\"scroll-button-arrow-wrapper\"></div>\r\n            </div>\r\n         </div>\r\n      </div>\r\n   </div>\r\n   <canvas id=\"mainCanvas\" style=\"opacity: 0\"></canvas>\r\n   <canvas id=\"horRulerCanvas\" style=\"opacity: 0\"></canvas>\r\n   <canvas id=\"vertRulerCanvas\" style=\"opacity: 0\"></canvas>\r\n   <div class=\"txScrollbarContainer\" style=\"opacity: 0\">\r\n      <div id=\"scroll-button-left\" class=\"scroll-button scroll-button-hor unselectable\">\r\n         <div class=\"scroll-button-arrow-wrapper\"></div>\r\n      </div>\r\n      <div id=\"horizontal-scrollbar-wrapper\" class=\"scrollbar-wrapper unselectable\">\r\n         <div id=\"slider-horizontal\"></div>\r\n      </div>\r\n      <div id=\"scroll-button-right\" class=\"scroll-button scroll-button-hor unselectable\">\r\n         <div class=\"scroll-button-arrow-wrapper\"></div>\r\n      </div>\r\n   </div>\r\n   <div class=\"txScrollbarContainer\" style=\"opacity: 0\">\r\n      <div id=\"scroll-button-up\" class=\"scroll-button scroll-button-vert unselectable\">\r\n         <div class=\"scroll-button-arrow-wrapper\"></div>\r\n      </div>\r\n      <div id=\"vertical-scrollbar-wrapper\" class=\"scrollbar-wrapper unselectable\">\r\n         <div id=\"slider-vertical\"></div>\r\n      </div>\r\n      <div id=\"scroll-button-down\" class=\"scroll-button scroll-button-vert unselectable\">\r\n         <div class=\"scroll-button-arrow-wrapper\"></div>\r\n      </div>\r\n   </div>\r\n   <canvas id=\"statusBarCanvas\" style=\"opacity: 0\"></canvas>\r\n   <ul id=\"txContextMenu\" class=\"dropDownMenu contextMenu\">\r\n   </ul>\r\n   <form id=\"txNovalidateForm\" novalidate=\"novalidate\" spellcheck=\"false\" autocomplete=\"off\"></form>\r\n</div>",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    DocumentEditorComponent.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    DocumentEditorComponent.propDecorators = {
        containerDiv: [{ type: ViewChild, args: ['txTemplateDesignerContainer', { static: true },] }],
        width: [{ type: Input }],
        height: [{ type: Input }],
        documentTargetMarkers: [{ type: Input }],
        backColor: [{ type: Input }],
        statusBarColor: [{ type: Input }],
        editMode: [{ type: Input }],
        contextMenusEnabled: [{ type: Input }],
        saveDocumentQuestionDialogEnabled: [{ type: Input }],
        tableGridLines: [{ type: Input }],
        textFrameMarkerLines: [{ type: Input }],
        controlChars: [{ type: Input }],
        textFieldsEditable: [{ type: Input }],
        formattingPrinter: [{ type: Input }],
        culture: [{ type: Input }],
        uiCulture: [{ type: Input }],
        userNames: [{ type: Input }],
        reconnectTimeout: [{ type: Input }],
        webSocketURL: [{ type: Input }]
    };
    return DocumentEditorComponent;
}());
export { DocumentEditorComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    DocumentEditorComponent.DefaultSettings;
    /**
     * @type {?}
     * @private
     */
    DocumentEditorComponent.NO_CONFLICT_JS;
    /** @type {?} */
    DocumentEditorComponent.prototype.containerDiv;
    /**
     * @type {?}
     * @private
     */
    DocumentEditorComponent.prototype.connectionID;
    /** @type {?} */
    DocumentEditorComponent.prototype.width;
    /** @type {?} */
    DocumentEditorComponent.prototype.height;
    /** @type {?} */
    DocumentEditorComponent.prototype.documentTargetMarkers;
    /** @type {?} */
    DocumentEditorComponent.prototype.backColor;
    /** @type {?} */
    DocumentEditorComponent.prototype.statusBarColor;
    /** @type {?} */
    DocumentEditorComponent.prototype.editMode;
    /** @type {?} */
    DocumentEditorComponent.prototype.contextMenusEnabled;
    /** @type {?} */
    DocumentEditorComponent.prototype.saveDocumentQuestionDialogEnabled;
    /** @type {?} */
    DocumentEditorComponent.prototype.tableGridLines;
    /** @type {?} */
    DocumentEditorComponent.prototype.textFrameMarkerLines;
    /** @type {?} */
    DocumentEditorComponent.prototype.controlChars;
    /** @type {?} */
    DocumentEditorComponent.prototype.textFieldsEditable;
    /** @type {?} */
    DocumentEditorComponent.prototype.formattingPrinter;
    /** @type {?} */
    DocumentEditorComponent.prototype.culture;
    /** @type {?} */
    DocumentEditorComponent.prototype.uiCulture;
    /** @type {?} */
    DocumentEditorComponent.prototype.userNames;
    /** @type {?} */
    DocumentEditorComponent.prototype.reconnectTimeout;
    /** @type {?} */
    DocumentEditorComponent.prototype.webSocketURL;
    /**
     * @type {?}
     * @private
     */
    DocumentEditorComponent.prototype.hostElement;
}
/** @type {?} */
var ConIDCharset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_';
/**
 * Generates a random string with a given length.
 * @param {?} length Length of the generated ID in characters.
 * @return {?}
 */
function generateRandomID(length) {
    if (length < 1)
        throw new Error('ID must be at least one character long.');
    /** @type {?} */
    var result = '';
    for (var i = 0; i < length; ++i) {
        result += ConIDCharset.charAt(Math.floor(Math.random() * ConIDCharset.length));
    }
    return result;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG9jdW1lbnQtZWRpdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0eHRleHRjb250cm9sL3R4LW5nLWRvY3VtZW50LWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi9kb2N1bWVudC1lZGl0b3IvZG9jdW1lbnQtZWRpdG9yLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNoRixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDcEMsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUN4QyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDOUMsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDbkUsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUNsQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDaEQsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUVoQztJQVVHLGlDQUFvQixXQUF1QjtRQUF2QixnQkFBVyxHQUFYLFdBQVcsQ0FBWTtRQVNsQywwQkFBcUIsR0FBWSx1QkFBdUIsQ0FBQyxlQUFlLENBQUMscUJBQXFCLENBQUM7UUFDL0YsY0FBUyxHQUFXLHVCQUF1QixDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDcEYsbUJBQWMsR0FBVyx1QkFBdUIsQ0FBQyxlQUFlLENBQUMsY0FBYyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzlGLGFBQVEsR0FBVyxNQUFNLENBQUM7UUFDMUIsd0JBQW1CLEdBQVksdUJBQXVCLENBQUMsZUFBZSxDQUFD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OlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBFbGVtZW50UmVmLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVFhTZXR0aW5ncyB9IGZyb20gXCIuL3R4LXNldHRpbmdzXCI7XHJcbmltcG9ydCB7IFRYX0pTIH0gZnJvbSBcIi4vdHgtbWluLWpzXCI7XHJcbmltcG9ydCB7IEpRVUVSWV9KUyB9IGZyb20gXCIuL2pxdWVyeS1qc1wiO1xyXG5pbXBvcnQgeyBKUVVFUllfVUlfSlMgfSBmcm9tIFwiLi9qcXVlcnktdWktanNcIjtcclxuaW1wb3J0IHsgSlFVRVJZX1VJX1RPVUNIX1BVTkNIIH0gZnJvbSBcIi4vanF1ZXJ5LXVpLXRvdWNoLXB1bmNoLWpzXCI7XHJcbmltcG9ydCB7IFRYX0NTUyB9IGZyb20gXCIuL3R4LWNzc1wiO1xyXG5pbXBvcnQgeyBKUVVFUllfVUlfQ1NTIH0gZnJvbSBcIi4vanF1ZXJ5LXVpLWNzc1wiO1xyXG5pbXBvcnQgeyBDb2xvciB9IGZyb20gJy4vY29sb3InO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgIHNlbGVjdG9yOiAndHgtZG9jdW1lbnQtZWRpdG9yJyxcclxuICAgdGVtcGxhdGVVcmw6ICcuL2RvY3VtZW50LWVkaXRvci5jb21wb25lbnQuaHRtbCcsXHJcbiAgIHN0eWxlVXJsczogWycuL2RvY3VtZW50LWVkaXRvci5jb21wb25lbnQuY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIERvY3VtZW50RWRpdG9yQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICAgQFZpZXdDaGlsZCgndHhUZW1wbGF0ZURlc2lnbmVyQ29udGFpbmVyJywgeyBzdGF0aWM6IHRydWUgfSkgY29udGFpbmVyRGl2OiBFbGVtZW50UmVmO1xyXG5cclxuICAgcHJpdmF0ZSBjb25uZWN0aW9uSUQ6IHN0cmluZztcclxuXHJcbiAgIGNvbnN0cnVjdG9yKHByaXZhdGUgaG9zdEVsZW1lbnQ6IEVsZW1lbnRSZWYpIHtcclxuICAgICAgLy8gR2VuZXJhdGUgY29ubmVjdGlvbiBpZFxyXG4gICAgICB0aGlzLmNvbm5lY3Rpb25JRCA9IGdlbmVyYXRlUmFuZG9tSUQoMjEpO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBEZWZhdWx0U2V0dGluZ3M6IFRYU2V0dGluZ3MgPSBuZXcgVFhTZXR0aW5ncygpO1xyXG5cclxuICAgQElucHV0KCkgd2lkdGg6IHN0cmluZztcclxuICAgQElucHV0KCkgaGVpZ2h0OiBzdHJpbmc7XHJcbiAgIEBJbnB1dCgpIGRvY3VtZW50VGFyZ2V0TWFya2VyczogYm9vbGVhbiA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50LkRlZmF1bHRTZXR0aW5ncy5Eb2N1bWVudFRhcmdldE1hcmtlcnM7XHJcbiAgIEBJbnB1dCgpIGJhY2tDb2xvcjogc3RyaW5nID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuRGVmYXVsdFNldHRpbmdzLkJhY2tDb2xvci50b0hleFN0cmluZygpO1xyXG4gICBASW5wdXQoKSBzdGF0dXNCYXJDb2xvcjogc3RyaW5nID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuRGVmYXVsdFNldHRpbmdzLlN0YXR1c0JhckNvbG9yLnRvSGV4U3RyaW5nKCk7XHJcbiAgIEBJbnB1dCgpIGVkaXRNb2RlOiBzdHJpbmcgPSAnRWRpdCc7XHJcbiAgIEBJbnB1dCgpIGNvbnRleHRNZW51c0VuYWJsZWQ6IGJvb2xlYW4gPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5EZWZhdWx0U2V0dGluZ3MuQ29udGV4dE1lbnVzRW5hYmxlZDtcclxuICAgQElucHV0KCkgc2F2ZURvY3VtZW50UXVlc3Rpb25EaWFsb2dFbmFibGVkOiBib29sZWFuID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuRGVmYXVsdFNldHRpbmdzLlNhdmVEb2N1bWVudFF1ZXN0aW9uRGlhbG9nRW5hYmxlZDtcclxuICAgQElucHV0KCkgdGFibGVHcmlkTGluZXM6IGJvb2xlYW4gPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5EZWZhdWx0U2V0dGluZ3MuVGFibGVHcmlkTGluZXM7XHJcbiAgIEBJbnB1dCgpIHRleHRGcmFtZU1hcmtlckxpbmVzOiBib29sZWFuID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuRGVmYXVsdFNldHRpbmdzLlRleHRGcmFtZU1hcmtlckxpbmVzO1xyXG4gICBASW5wdXQoKSBjb250cm9sQ2hhcnM6IGJvb2xlYW4gPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5EZWZhdWx0U2V0dGluZ3MuQ29udHJvbENoYXJzO1xyXG4gICBASW5wdXQoKSB0ZXh0RmllbGRzRWRpdGFibGU6IGJvb2xlYW4gPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5EZWZhdWx0U2V0dGluZ3MuVGV4dEZpZWxkc0VkaXRhYmxlO1xyXG4gICBASW5wdXQoKSBmb3JtYXR0aW5nUHJpbnRlcjogc3RyaW5nID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuRGVmYXVsdFNldHRpbmdzLkZvcm1hdHRpbmdQcmludGVyO1xyXG4gICBASW5wdXQoKSBjdWx0dXJlOiBzdHJpbmcgPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5EZWZhdWx0U2V0dGluZ3MuQ3VsdHVyZTtcclxuICAgQElucHV0KCkgdWlDdWx0dXJlOiBzdHJpbmcgPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5EZWZhdWx0U2V0dGluZ3MuVUlDdWx0dXJlO1xyXG4gICBASW5wdXQoKSB1c2VyTmFtZXM6IHN0cmluZ1tdID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuRGVmYXVsdFNldHRpbmdzLlVzZXJOYW1lcztcclxuICAgQElucHV0KCkgcmVjb25uZWN0VGltZW91dDogbnVtYmVyID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuRGVmYXVsdFNldHRpbmdzLlJlY29ubmVjdFRpbWVvdXQ7XHJcbiAgIEBJbnB1dCgpIHdlYlNvY2tldFVSTDogc3RyaW5nID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuRGVmYXVsdFNldHRpbmdzLldlYlNvY2tldFVSTDtcclxuXHJcbiAgIG5nT25Jbml0KCkge1xyXG4gICAgICAvLyBEeW5hbWljYWxseSBhZGQgbmVjZXNzYXJ5IHNjcmlwdHMgYW5kIHN0eWxlc2hlZXRzIHRvIGRvbVxyXG5cclxuICAgICAgLy8galF1ZXJ5IFVJIENTU1xyXG4gICAgICBsZXQgZWxlbVN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcclxuICAgICAgZWxlbVN0eWxlLmlubmVyVGV4dCA9IEpRVUVSWV9VSV9DU1M7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyRGl2Lm5hdGl2ZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlbVN0eWxlKTtcclxuXHJcbiAgICAgIC8vIFRYIENTU1xyXG4gICAgICBlbGVtU3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG4gICAgICBlbGVtU3R5bGUudGl0bGUgPSAnVFggVGV4dCBDb250cm9sIEhUTUw1IEVkaXRvciBtYWluIFN0eWxlc2hlZXQnO1xyXG4gICAgICBlbGVtU3R5bGUuaW5uZXJUZXh0ID0gVFhfQ1NTO1xyXG4gICAgICB0aGlzLmNvbnRhaW5lckRpdi5uYXRpdmVFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1TdHlsZSk7XHJcblxyXG4gICAgICAvLyBUWCBzZXR0aW5nc1xyXG4gICAgICBsZXQgZWxlbVNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICBlbGVtU2NyaXB0LnR5cGUgPSAnYXBwbGljYXRpb24vanNvbic7XHJcbiAgICAgIGVsZW1TY3JpcHQuaWQgPSAnX190eFNldHRpbmdzJztcclxuICAgICAgZWxlbVNjcmlwdC5pbm5lclRleHQgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnNldHRpbmdzKTtcclxuICAgICAgdGhpcy5jb250YWluZXJEaXYubmF0aXZlRWxlbWVudC5hcHBlbmRDaGlsZChlbGVtU2NyaXB0KTtcclxuXHJcbiAgICAgIC8vIGpRdWVyeVxyXG4gICAgICBlbGVtU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgIGVsZW1TY3JpcHQuaW5uZXJUZXh0ID0gSlFVRVJZX0pTO1xyXG4gICAgICB0aGlzLmNvbnRhaW5lckRpdi5uYXRpdmVFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1TY3JpcHQpO1xyXG5cclxuICAgICAgLy8galF1ZXJ5IFVJXHJcbiAgICAgIGVsZW1TY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgZWxlbVNjcmlwdC5pbm5lclRleHQgPSBKUVVFUllfVUlfSlM7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyRGl2Lm5hdGl2ZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlbVNjcmlwdCk7XHJcblxyXG4gICAgICAvLyBUb3VjaCBlbmhhbmNlbWVudHMgZm9yIGpRdWVyeSBVSVxyXG4gICAgICBlbGVtU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgIGVsZW1TY3JpcHQuaW5uZXJUZXh0ID0gSlFVRVJZX1VJX1RPVUNIX1BVTkNIO1xyXG4gICAgICB0aGlzLmNvbnRhaW5lckRpdi5uYXRpdmVFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1TY3JpcHQpO1xyXG5cclxuICAgICAgLy8gJC5ub0NvbmZsaWN0KClcclxuICAgICAgZWxlbVNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICBlbGVtU2NyaXB0LmlubmVyVGV4dCA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50Lk5PX0NPTkZMSUNUX0pTO1xyXG4gICAgICB0aGlzLmNvbnRhaW5lckRpdi5uYXRpdmVFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1TY3JpcHQpO1xyXG5cclxuICAgICAgLy8gVFggbWFpbiBzY3JpcHQgZmlsZVxyXG4gICAgICBlbGVtU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgIGVsZW1TY3JpcHQuaW5uZXJUZXh0ID0gVFhfSlM7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyRGl2Lm5hdGl2ZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlbVNjcmlwdCk7XHJcblxyXG4gICAgICAvLyBTZXQgc3R1ZmYgb24gaG9zdCBlbGVtZW50XHJcbiAgICAgIHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XHJcbiAgICAgIHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudC5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGg7XHJcbiAgICAgIHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuICAgfVxyXG5cclxuICAgZ2V0IHNldHRpbmdzKCk6IFRYU2V0dGluZ3Mge1xyXG4gICAgICBsZXQgc2V0dGluZ3MgPSBuZXcgVFhTZXR0aW5ncyh0aGlzLndlYlNvY2tldFVSTCk7XHJcblxyXG4gICAgICBzZXR0aW5ncy5Db25uZWN0aW9uSUQgPSB0aGlzLmNvbm5lY3Rpb25JRFxyXG4gICAgICBzZXR0aW5ncy5Eb2N1bWVudFRhcmdldE1hcmtlcnMgPSB0aGlzLmRvY3VtZW50VGFyZ2V0TWFya2VycztcclxuICAgICAgc2V0dGluZ3MuQmFja0NvbG9yID0gQ29sb3IuZnJvbUhleFN0cmluZyh0aGlzLmJhY2tDb2xvcik7XHJcbiAgICAgIHNldHRpbmdzLlN0YXR1c0JhckNvbG9yID0gQ29sb3IuZnJvbUhleFN0cmluZyh0aGlzLnN0YXR1c0JhckNvbG9yKTtcclxuICAgICAgc2V0dGluZ3MuRWRpdE1vZGUgPSBUWFNldHRpbmdzLmVkaXRNb2RlRnJvbVN0cmluZyh0aGlzLmVkaXRNb2RlKTtcclxuICAgICAgc2V0dGluZ3MuQ29udGV4dE1lbnVzRW5hYmxlZCA9IHRoaXMuY29udGV4dE1lbnVzRW5hYmxlZDtcclxuICAgICAgc2V0dGluZ3MuU2F2ZURvY3VtZW50UXVlc3Rpb25EaWFsb2dFbmFibGVkID0gdGhpcy5zYXZlRG9jdW1lbnRRdWVzdGlvbkRpYWxvZ0VuYWJsZWQ7XHJcbiAgICAgIHNldHRpbmdzLlRhYmxlR3JpZExpbmVzID0gdGhpcy50YWJsZUdyaWRMaW5lcztcclxuICAgICAgc2V0dGluZ3MuVGV4dEZyYW1lTWFya2VyTGluZXMgPSB0aGlzLnRleHRGcmFtZU1hcmtlckxpbmVzO1xyXG4gICAgICBzZXR0aW5ncy5Db250cm9sQ2hhcnMgPSB0aGlzLmNvbnRyb2xDaGFycztcclxuICAgICAgc2V0dGluZ3MuVGV4dEZpZWxkc0VkaXRhYmxlID0gdGhpcy50ZXh0RmllbGRzRWRpdGFibGU7XHJcbiAgICAgIHNldHRpbmdzLkZvcm1hdHRpbmdQcmludGVyID0gdGhpcy5mb3JtYXR0aW5nUHJpbnRlcjtcclxuICAgICAgc2V0dGluZ3MuQ3VsdHVyZSA9IHRoaXMuY3VsdHVyZTtcclxuICAgICAgc2V0dGluZ3MuVUlDdWx0dXJlID0gdGhpcy51aUN1bHR1cmU7XHJcbiAgICAgIHNldHRpbmdzLlVzZXJOYW1lcyA9IHRoaXMudXNlck5hbWVzO1xyXG4gICAgICBzZXR0aW5ncy5SZWNvbm5lY3RUaW1lb3V0ID0gdGhpcy5yZWNvbm5lY3RUaW1lb3V0O1xyXG4gICAgICBzZXR0aW5ncy5XZWJTb2NrZXRVUkwgPSB0aGlzLndlYlNvY2tldFVSTDtcclxuXHJcbiAgICAgIHJldHVybiBzZXR0aW5ncztcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgTk9fQ09ORkxJQ1RfSlM6IHN0cmluZyA9ICd2YXIgaiQxXzEwXzIgPSAkLm5vQ29uZmxpY3QodHJ1ZSk7JztcclxufVxyXG5cclxuY29uc3QgQ29uSURDaGFyc2V0OiBzdHJpbmcgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjEyMzQ1Njc4OTBfJztcclxuXHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSByYW5kb20gc3RyaW5nIHdpdGggYSBnaXZlbiBsZW5ndGguXHJcbiAqIEBwYXJhbSBsZW5ndGggTGVuZ3RoIG9mIHRoZSBnZW5lcmF0ZWQgSUQgaW4gY2hhcmFjdGVycy5cclxuICovXHJcbmZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tSUQobGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICBpZiAobGVuZ3RoIDwgMSkgdGhyb3cgbmV3IEVycm9yKCdJRCBtdXN0IGJlIGF0IGxlYXN0IG9uZSBjaGFyYWN0ZXIgbG9uZy4nKTtcclxuXHJcbiAgIGxldCByZXN1bHQ6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xyXG4gICAgICByZXN1bHQgKz0gQ29uSURDaGFyc2V0LmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBDb25JRENoYXJzZXQubGVuZ3RoKSk7XHJcbiAgIH1cclxuXHJcbiAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuIl19